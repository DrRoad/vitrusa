"0","#change na's to zero for Calcium carbonate"
"0","bd2$CaCarb[is.na(bd2$CaCarb)]<- 0"
"0"," "
"0","summary(bd2$CaCarb)"
"1","    Min. "
"1"," 1st Qu. "
"1","  Median "
"1","    Mean "
"1"," 3rd Qu. "
"1","    Max. "
"1","
"
"1","-0.01210 "
"1"," 0.00000 "
"1"," 0.03010 "
"1"," 0.08093 "
"1"," 0.11166 "
"1"," 0.40039 "
"1","
"
"0","#calculate SOC and change anything less than 0 to 0 "
"0","bd2$CALC_SOC <- bd2$Tot_C - (bd2$CaCarb*0.12)"
"0","bd2$CALC_SOC[bd2$CALC_SOC<0] <- 0"
"0","summary(bd2$CALC_SOC)"
"1","   Min. "
"1","1st Qu. "
"1"," Median "
"1","   Mean "
"1","3rd Qu. "
"1","   Max. "
"1","
"
"1"," 0.5713 "
"1"," 0.9626 "
"1"," 1.2932 "
"1"," 1.3972 "
"1"," 1.7076 "
"1"," 2.7534 "
"1","
"
"0","#join back to original data"
"0","wd <- tn %>%"
"0","  mutate_if(is.factor, as.character) %>%"
"0","  mutate_if(is.integer, as.numeric) %>%"
"0","  bind_rows(bd2 %>%"
"0","              select(KSSL.Project.lab, KSSL.Project.name, UserPedonID, labsampno, layerID, Comp, Cover_kind, Crop,  Mgmt, Soil, hor_desg, hor_top, hor_bot, BulkDensity, CALC_SOC) %>%"
"0","              mutate_if(is.factor, as.character) %>%"
"0","              mutate_if(is.integer, as.numeric) %>%"
"0","              gather(Prop, Value, -c(KSSL.Project.lab, KSSL.Project.name, UserPedonID, labsampno, layerID, Comp, Cover_kind, Crop,  Mgmt, Soil, hor_desg, hor_top, hor_bot))"
"0","  "
"0","  )"
"0"," "
