---
title: "sdjr_spatial_progress"
author: "Stephen Roecker"
date: "Monday, July 27, 2015"
output: html_document
---

options(stringsAsFactors=F)

library(plyr)
library(stringr)
library(RCurl)
library(XML)

source("C:/workspace/soil-pit/trunk/queries/kssl_reports.R")


```{r du report, echo=FALSE}

goals <- goals_report(fy, "11-%25")

# WEB-PROJECT-Counties+with+approved+projects+DU
fy <- 2015

du <- du_report(fy)
# du <- read.csv("report_digiting_unit_2015_08_11.csv")

du11 <- subset(du, State_Responsible == "Indiana")

ddply(du11, .(Office), summarize, nProjects = length(unique(Project_Name)))
```


```{r correlation report, echo=FALSE}
# WEB-Correlation_state_fy_ids

data(state)
st <- tolower(state.abb)
st_p <- paste0(st, "%25")

report <- correlation_report(st_p, 2015)
# corr <- read.csv("report_correlation_2015_09_02_spatial.csv")
# corr$region <- unlist(lapply(corr$Office, function(x) strsplit(x, "-")[[1]][1]))
attach(report)

corr11 <- subset(corr, grepl("11-", Office))
corr11 <- rename(corr11, c("Project_Name" = "pname", "New_Symbol" = "musym_corr", "Old_Musym2" = "old_musym_corr"))

ddply(corr11, .(Office), summarize, nProjects = length(unique(pname)))



st <- paste0(toupper(c("ia", "il", "in", "ks", "ky", "mi", "mn", "mo", "ne", "oh", "ok", "sd", "wi")), "%25")
leg <- legends_report(st)

```



